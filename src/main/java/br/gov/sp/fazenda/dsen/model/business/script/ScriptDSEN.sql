CREATE TABLE LOTE (ID_LOTE BIGINT NOT NULL, CNPJ_TRANSMISSAO varchar(20) NOT NULL, DATA_TRANSMISSAO TIMESTAMP NOT NULL, NUM_RECIBO VARCHAR(15), XML_RETORNO blob(102400), DATA_PROC TIMESTAMP, PRIMARY KEY(ID_LOTE))
CREATE TABLE EMITENTE (ID_EMITENTE integer NOT NULL, X_NOME varchar(60) NOT NULL, X_FANT varchar(60), X_LGR varchar(60) NOT NULL, NRO varchar(60) NOT NULL, X_CPL varchar(60), X_BAIRRO varchar(60) NOT NULL, C_MUN VARCHAR(7) NOT NULL, X_MUN varchar(60) NOT NULL, UF varchar(2) NOT NULL, CEP varchar(8), C_PAIS VARCHAR(4), X_PAIS varchar(60), FONE VARCHAR(14), IE varchar(14) NOT NULL, IEST varchar(14), IM varchar(15), CNAE VARCHAR(7), LOGOTIPO blob(8000), TP_DOCUMENTO_ENUM integer NOT NULL, NR_DOCUMENTO varchar(14) NOT NULL, REGIME_TRIBUTARIO VARCHAR(4) NOT NULL, VERSAO VARCHAR(60) NOT NULL DEFAULT '1.02', PRIMARY KEY(ID_EMITENTE), UNIQUE(NR_DOCUMENTO))
CREATE TABLE PROPRIEDADE (ID_PROPRIEDADE integer NOT NULL, PROPRIEDADE_ENUM integer NOT NULL, VALOR varchar(255), ID_EMITENTE integer NOT NULL, PRIMARY KEY (ID_PROPRIEDADE), FOREIGN KEY (ID_EMITENTE) REFERENCES EMITENTE, UNIQUE(PROPRIEDADE_ENUM,ID_EMITENTE))
CREATE TABLE GENERATOR (GEN_KEY varchar(50) NOT NULL, GEN_VALUE integer NOT NULL, PRIMARY KEY (GEN_KEY))
CREATE TABLE TRANSPORTADORA (ID_TRANSPORTADORA integer NOT NULL, TP_DOCUMENTO_ENUM integer, NR_DOCUMENTO varchar(15), X_NOME varchar(60) NOT NULL, IE varchar(14), X_ENDER varchar(60), UF varchar(2), X_MUN VARCHAR(60), ID_EMITENTE integer NOT NULL, VERSAO VARCHAR(60) NOT NULL DEFAULT '1.02',     PRIMARY KEY(ID_TRANSPORTADORA), FOREIGN KEY(ID_EMITENTE) REFERENCES EMITENTE )
CREATE TABLE PRODUTO (C_PROD varchar(60) NOT NULL, ID_PRODUTO integer NOT NULL, X_PROD varchar(120) NOT NULL, C_EAN varchar(14), NCM varchar(8), EX_TIPI varchar(3), GENERO VARCHAR(2), U_COM varchar(6), C_EAN_TRIB varchar(14), U_TRIB varchar(6), V_UN_COM VARCHAR(17), V_UN_TRIB VARCHAR(17), Q_TRIB VARCHAR(20), ID_EMITENTE integer NOT NULL, VERSAO VARCHAR(60) NOT NULL DEFAULT '1.02', PRIMARY KEY (ID_PRODUTO), FOREIGN KEY (ID_EMITENTE) REFERENCES EMITENTE, UNIQUE( ID_EMITENTE, C_PROD))
CREATE TABLE IPI (ID_IPI integer NOT NULL, CL_ENQ varchar(5), CNPJ_PROD varchar(14), C_ENQ varchar(3), ID_PRODUTO integer NOT NULL, PRIMARY KEY (ID_IPI), FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTO, UNIQUE(ID_PRODUTO))
CREATE TABLE ICMS (ID_ICMS integer NOT NULL, ORIG VARCHAR(2), ID_PRODUTO integer NOT NULL, CST VARCHAR(7) NOT NULL, MOD_BC VARCHAR(2), P_RED_BC VARCHAR(6), P_ICMS VARCHAR(6), MOD_BCST VARCHAR(2), P_MVAST VARCHAR(6), P_RED_BCST VARCHAR(6), P_ICMSST VARCHAR(6), MOT_DES_ICMS VARCHAR(2), P_BCOP VARCHAR(6), UFST VARCHAR(2), P_CRED_SN VARCHAR(6), PRIMARY KEY(ID_ICMS), FOREIGN KEY(ID_PRODUTO) REFERENCES PRODUTO, UNIQUE(ID_PRODUTO,CST))
CREATE TABLE CLIENTE (TP_DOCUMENTO_ENUM integer, ID_CLIENTE integer NOT NULL, NR_DOCUMENTO varchar(14), X_NOME varchar(60) NOT NULL, X_LGR varchar(60), NRO varchar(60), X_CPL varchar(60), X_BAIRRO varchar(60), X_MUN varchar(60), C_MUN VARCHAR(7), UF varchar(2), CEP varchar(8), C_PAIS VARCHAR(4), X_PAIS varchar(60), FONE VARCHAR(14), EMAIL VARCHAR(60), ID_EMITENTE integer NOT NULL, IE varchar(14), IESUF varchar(9), VERSAO VARCHAR(60) NOT NULL DEFAULT '1.02', PRIMARY KEY(ID_CLIENTE), FOREIGN KEY(ID_EMITENTE) REFERENCES EMITENTE)
CREATE TABLE PARAMETROS (PARAMETROS_ENUM integer NOT NULL, VALOR varchar(255), PRIMARY KEY(PARAMETROS_ENUM))
CREATE TABLE CERTIFICADO_INFO (ID_CERTIFICADO_INFO INTEGER NOT NULL, ID_EMITENTE INTEGER NOT NULL, ALIAS VARCHAR(255)NOT NULL,NOME VARCHAR(255)NOT NULL, AUTORIDADE_CERTIFICADORA VARCHAR(255)NOT NULL, CNPJ VARCHAR(14) NOT NULL, CAMINHO VARCHAR(255) NOT NULL, TIPO_CERTIFICADO VARCHAR(2) NOT NULL, DATA_UTILIZACAO TIMESTAMP, DATA_VALIDADE TIMESTAMP NOT NULL, PRIMARY KEY(ID_CERTIFICADO_INFO), FOREIGN KEY(ID_EMITENTE) REFERENCES EMITENTE)
CREATE TABLE NOTA_FISCAL (ID_NOTA_FISCAL BIGINT NOT NULL, NUMERO VARCHAR(9) NOT NULL, SERIE VARCHAR(3) NOT NULL, MODELO VARCHAR(2) NOT NULL, SITUACAO VARCHAR(100) NOT NULL, MES VARCHAR(2) NOT NULL, ANO VARCHAR(2) NOT NULL, TIPO_EMISSAO VARCHAR(100), DATA_EMISSAO TIMESTAMP, DATA_AUTORIZACAO TIMESTAMP, CODIGO_NUMERICO_CHAVE_ACESSO VARCHAR(9), DIGITO_CHAVE_ACESSO VARCHAR(1), AUTORIZACAO_EXPORTADA_XML char(1) NOT NULL DEFAULT '0', DOCUMENTO_DEST varchar(20), UF_DEST varchar(2), NUMERO_RECIBO VARCHAR(15), DANFE_IMPRESSO char(1) NOT NULL DEFAULT '0', DOC_XML blob(102400), DATA_SISTEMA TIMESTAMP, PROTOCOLO blob(102400), NUMERO_PROTOCOLO VARCHAR(15), DATA_PROTOCOLO TIMESTAMP, CODIGO_UF_EMITENTE varchar(2) NOT NULL, ID_EMITENTE integer NOT NULL, ID_LOTE BIGINT, CODIGO_ERRO VARCHAR(3), MENSAGEM_ERRO VARCHAR(255),VERSAO varchar(10) NOT NULL, PRIMARY KEY(ID_NOTA_FISCAL), FOREIGN KEY(ID_LOTE) REFERENCES LOTE, FOREIGN KEY(ID_EMITENTE) REFERENCES EMITENTE, UNIQUE(NUMERO,SERIE,ANO,ID_EMITENTE))
CREATE TABLE CANCELAMENTO ( ID_NOTA_FISCAL BIGINT NOT NULL, NUMERO_PROTOCOLO VARCHAR(15) NOT NULL, PROTOCOLO blob(102400) NOT NULL, DATA_PROTOCOLO TIMESTAMP NOT NULL, CODIGO_ERRO VARCHAR(3), MENSAGEM_ERRO VARCHAR(255), JUSTIFICATIVA VARCHAR(255), PRIMARY KEY (ID_NOTA_FISCAL), FOREIGN KEY (ID_NOTA_FISCAL) REFERENCES NOTA_FISCAL)
CREATE TABLE INUTILIZACAO (ID_INUTILIZACAO BIGINT NOT NULL, ID_EMITENTE integer NOT NULL, SERIE VARCHAR(3) NOT NULL, NUMERO_INICIAL VARCHAR(9) NOT NULL, NUMERO_FINAL VARCHAR(9) NOT NULL, PROTOCOLO_XML blob(102400), DATA_INUTILIZACAO TIMESTAMP, PRIMARY KEY (ID_INUTILIZACAO), FOREIGN KEY (ID_EMITENTE) REFERENCES EMITENTE, UNIQUE(ID_EMITENTE,SERIE,NUMERO_INICIAL,NUMERO_FINAL))
CREATE TABLE PESQUISA (ID_PESQUISA integer NOT NULL, CAMPO_ENUM integer NOT NULL, VALOR varchar(120), ID_EMITENTE integer NOT NULL, TELA_ENUM integer NOT NULL, PRIMARY KEY (ID_PESQUISA), FOREIGN KEY (ID_EMITENTE) REFERENCES EMITENTE, UNIQUE(ID_EMITENTE, CAMPO_ENUM, TELA_ENUM))
CREATE TABLE NUMERACAO (ID_NUMERACAO integer NOT NULL, SERIE VARCHAR(3) NOT NULL, NUMERO VARCHAR(9) NOT NULL, ANO VARCHAR(2) NOT NULL, DATA_SISTEMA TIMESTAMP, ID_EMITENTE integer NOT NULL, PRIMARY KEY (ID_NUMERACAO), FOREIGN KEY (ID_EMITENTE) REFERENCES EMITENTE, UNIQUE(SERIE,ANO,ID_EMITENTE))
CREATE TABLE CONTROLE_VERSAO (ID_CONTROLE_VERSAO integer NOT NULL, NUM_VERSAO_ENUM integer NOT NULL, DATA_VERSAO date NOT NULL, PRIMARY KEY (ID_CONTROLE_VERSAO), UNIQUE(NUM_VERSAO_ENUM))
CREATE TABLE EVENTO (ID_EVENTO BIGINT NOT NULL, ID_NOTA_FISCAL BIGINT NOT NULL, TP_EVENTO varchar(7) NOT NULL, N_SEQ_EVENTO INT NOT NULL, DATA_EVENTO TIMESTAMP, NUM_PROTOCOLO VARCHAR(15), XML_PROC blob(102400) NOT NULL, DATA_REG_EVENTO TIMESTAMP, PRIMARY KEY(ID_EVENTO), FOREIGN KEY(ID_NOTA_FISCAL) REFERENCES NOTA_FISCAL)
INSERT INTO CONTROLE_VERSAO(ID_CONTROLE_VERSAO,NUM_VERSAO_ENUM,DATA_VERSAO) VALUES(0,0,CURRENT_DATE)
